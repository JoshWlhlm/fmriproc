#!/usr/bin/env python

from nilearn import image
import sys

def main(argv):

    """
---------------------------------------------------------------------------------------------------
call_resample

This function quickly resamples a given input image to a given reference image and write a new file
with the resampled-to-reference input image

Arguments:
    <input>     image to be resampled
    <reference> image to resample to

Optional:
    <output>    optional: output filename, otherwise input name will be used!

Example:
    call_resample <input> <reference> <output>

---------------------------------------------------------------------------------------------------
    """

    if len(argv) < 2 or len(argv) > 3:
        print(main.__doc__)
        sys.exit(1)

    in_img, ref_img = argv[:2]
    out_img = argv[2] if len(argv) == 3 else in_img

    resampled_img = image.resample_to_img(
        in_img,
        ref_img, 
        interpolation='nearest'
    )

    resampled_img.to_filename(out_img)

if __name__ == "__main__":
    main(sys.argv[1:])
