

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pRF &mdash; fMRIproc Documentation 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Roi" href="roi.html" />
    <link rel="prev" title="Planning" href="planning.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            fMRIproc Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview of fMRIproc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_steps.html">Pipeline Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional_software.html">Required External Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster_usage.html">Running fMRIproc on HPC Clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting &amp; Common Issues</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="image.html">Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="planning.html">Planning</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">pRF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.CollectSubject"><code class="docutils literal notranslate"><span class="pre">CollectSubject</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.CollectSubject.return_prf_params"><code class="docutils literal notranslate"><span class="pre">CollectSubject.return_prf_params()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.CollectSubject.return_target_vertex"><code class="docutils literal notranslate"><span class="pre">CollectSubject.return_target_vertex()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.CollectSubject.target_prediction_prf"><code class="docutils literal notranslate"><span class="pre">CollectSubject.target_prediction_prf()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.ExtendedModel"><code class="docutils literal notranslate"><span class="pre">ExtendedModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.ExtendedModel.define_grid_bounds"><code class="docutils literal notranslate"><span class="pre">ExtendedModel.define_grid_bounds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.ExtendedModel.gridfit"><code class="docutils literal notranslate"><span class="pre">ExtendedModel.gridfit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.ExtendedModel.iterfit"><code class="docutils literal notranslate"><span class="pre">ExtendedModel.iterfit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.FormatTimeCourses"><code class="docutils literal notranslate"><span class="pre">FormatTimeCourses</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.FormatTimeCourses.average_iterations"><code class="docutils literal notranslate"><span class="pre">FormatTimeCourses.average_iterations()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.FormatTimeCourses.format_hemi_data"><code class="docutils literal notranslate"><span class="pre">FormatTimeCourses.format_hemi_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.FormatTimeCourses.get_verts"><code class="docutils literal notranslate"><span class="pre">FormatTimeCourses.get_verts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.FormatTimeCourses.return_data"><code class="docutils literal notranslate"><span class="pre">FormatTimeCourses.return_data()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.GaussianModel"><code class="docutils literal notranslate"><span class="pre">GaussianModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.GaussianModel.gridfit"><code class="docutils literal notranslate"><span class="pre">GaussianModel.gridfit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.GaussianModel.iterfit"><code class="docutils literal notranslate"><span class="pre">GaussianModel.iterfit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.Parameters"><code class="docutils literal notranslate"><span class="pre">Parameters</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.Parameters.to_array"><code class="docutils literal notranslate"><span class="pre">Parameters.to_array()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.Parameters.to_df"><code class="docutils literal notranslate"><span class="pre">Parameters.to_df()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.Profile1D"><code class="docutils literal notranslate"><span class="pre">Profile1D</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.Profile1D.create_dm"><code class="docutils literal notranslate"><span class="pre">Profile1D.create_dm()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.Profile1D.find_crossings"><code class="docutils literal notranslate"><span class="pre">Profile1D.find_crossings()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.Profile1D.plot_dm"><code class="docutils literal notranslate"><span class="pre">Profile1D.plot_dm()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.SizeResponse"><code class="docutils literal notranslate"><span class="pre">SizeResponse</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.SizeResponse.batch_sr_function"><code class="docutils literal notranslate"><span class="pre">SizeResponse.batch_sr_function()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.SizeResponse.find_pref_size"><code class="docutils literal notranslate"><span class="pre">SizeResponse.find_pref_size()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.SizeResponse.find_stim_sizes"><code class="docutils literal notranslate"><span class="pre">SizeResponse.find_stim_sizes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.SizeResponse.make_sr_function"><code class="docutils literal notranslate"><span class="pre">SizeResponse.make_sr_function()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.SizeResponse.make_stimuli"><code class="docutils literal notranslate"><span class="pre">SizeResponse.make_stimuli()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.SizeResponse.plot_stim_size"><code class="docutils literal notranslate"><span class="pre">SizeResponse.plot_stim_size()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.SizeResponse.save_target_params"><code class="docutils literal notranslate"><span class="pre">SizeResponse.save_target_params()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.VertexInfo"><code class="docutils literal notranslate"><span class="pre">VertexInfo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.VertexInfo.get"><code class="docutils literal notranslate"><span class="pre">VertexInfo.get()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.baseline_from_dm"><code class="docutils literal notranslate"><span class="pre">baseline_from_dm()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.create_circular_mask"><code class="docutils literal notranslate"><span class="pre">create_circular_mask()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.create_line_prf_matrix"><code class="docutils literal notranslate"><span class="pre">create_line_prf_matrix()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.create_model_rf_wrapper"><code class="docutils literal notranslate"><span class="pre">create_model_rf_wrapper()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.create_stim_library"><code class="docutils literal notranslate"><span class="pre">create_stim_library()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.deg2pix"><code class="docutils literal notranslate"><span class="pre">deg2pix()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.distance_centers"><code class="docutils literal notranslate"><span class="pre">distance_centers()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.find_most_similar_prf"><code class="docutils literal notranslate"><span class="pre">find_most_similar_prf()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.gauss_1d_function"><code class="docutils literal notranslate"><span class="pre">gauss_1d_function()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.generate_model_params"><code class="docutils literal notranslate"><span class="pre">generate_model_params()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.get_onset_idx"><code class="docutils literal notranslate"><span class="pre">get_onset_idx()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.get_prfdesign"><code class="docutils literal notranslate"><span class="pre">get_prfdesign()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.make_prf"><code class="docutils literal notranslate"><span class="pre">make_prf()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.make_stims"><code class="docutils literal notranslate"><span class="pre">make_stims()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.make_stims2"><code class="docutils literal notranslate"><span class="pre">make_stims2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.norm_1d_sr_function"><code class="docutils literal notranslate"><span class="pre">norm_1d_sr_function()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.norm_2d_sr_function"><code class="docutils literal notranslate"><span class="pre">norm_2d_sr_function()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.normalize_prf"><code class="docutils literal notranslate"><span class="pre">normalize_prf()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.define_hrf"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.define_hrf()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.define_settings"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.define_settings()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.fetch_bounds"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.fetch_bounds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.fetch_optimizer_info"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.fetch_optimizer_info()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.fit"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.fit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.fix_hrf_parameters"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.fix_hrf_parameters()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.get_max_parameter_shape"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.get_max_parameter_shape()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.load_params"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.load_params()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.make_predictions"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.make_predictions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.plot_vox"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.plot_vox()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.save_params"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.save_params()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.unitwise_bounds"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.unitwise_bounds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.update_settings"><code class="docutils literal notranslate"><span class="pre">pRFmodelFitting.update_settings()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.pix2deg"><code class="docutils literal notranslate"><span class="pre">pix2deg()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.plot_stims"><code class="docutils literal notranslate"><span class="pre">plot_stims()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.prf_neighbouring_vertices"><code class="docutils literal notranslate"><span class="pre">prf_neighbouring_vertices()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.radius"><code class="docutils literal notranslate"><span class="pre">radius()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.read_par_file"><code class="docutils literal notranslate"><span class="pre">read_par_file()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.resample2d"><code class="docutils literal notranslate"><span class="pre">resample2d()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fmriproc.prf.select_stims"><code class="docutils literal notranslate"><span class="pre">select_stims()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="roi.html">Roi</a></li>
<li class="toctree-l2"><a class="reference internal" href="scanner.html">Scanner</a></li>
<li class="toctree-l2"><a class="reference internal" href="transform.html">Transform</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bash.html">Bash modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fMRIproc Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Python modules</a></li>
      <li class="breadcrumb-item active">pRF</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/classes/prf.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="prf">
<h1>pRF<a class="headerlink" href="#prf" title="Link to this heading"></a></h1>
<p>This file contains functions and classes related to <a class="reference external" href="https://github.com/VU-Cog-Sci/prfpy">pRFpy</a></p>
<dl class="py class" id="module-fmriproc.prf">
<dt class="sig sig-object py" id="fmriproc.prf.CollectSubject">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">CollectSubject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subject</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">derivatives</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cx_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lh'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_vertex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_hrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#CollectSubject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.CollectSubject" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#fmriproc.prf.pRFmodelFitting" title="fmriproc.prf.pRFmodelFitting"><code class="xref py py-class docutils literal notranslate"><span class="pre">pRFmodelFitting</span></code></a></p>
<p>Simple class to fetch pRF-related settings given a subject. Collects the design matrix, settings, and target vertex
information. The <cite>ses</cite>-flag decides from which session the pRF-parameters to be used. You can either specify an
<em>analysis_yaml</em> file containing information about a pRF-analysis, or specify <em>settings=’recent’</em> to fetch the most recent
analysis file in the pRF-directory of the subject. The latter is generally fine if you want information about the stimulus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subject</strong> (<em>str</em>) – subject ID as used throughout the pipeline</p></li>
<li><p><strong>ses</strong> (<em>int</em><em>, </em><em>optional</em>) – Source session of pRF-parameters to use, by default 1</p></li>
<li><p><strong>derivatives</strong> (<em>str</em><em>, </em><em>optional</em>) – Derivatives directory, by default None.</p></li>
<li><p><strong>cx_dir</strong> (<em>str</em><em>, </em><em>optional</em>) – path to subject-specific pycortex directory</p></li>
<li><p><strong>prf_dir</strong> (<em>str</em><em>, </em><em>optional</em>) – subject-specific pRF directory, by default None. <cite>derivatives</cite> will be ignore if this flag is used</p></li>
<li><p><strong>hemi</strong> (<em>str</em><em>, </em><em>optional</em>) – Hemisphere to extract target vertex from, by default “lh”</p></li>
<li><p><strong>model</strong> (<em>str</em><em>, </em><em>optional</em>) – By default <cite>gauss</cite>, which reads in the gaussian iterative fit parameters in a
<a class="reference internal" href="#fmriproc.prf.pRFmodelFitting" title="fmriproc.prf.pRFmodelFitting"><code class="xref py py-class docutils literal notranslate"><span class="pre">fmriproc.prf.pRFmodelFitting</span></code></a>-object. Can be any of the allowed models (‘gauss’, ‘css’, ‘dog’, norm).</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Set to True if you want some messages along the way (default = True)</p></li>
<li><p><strong>resize_pix</strong> (<em>int</em>) – resolution of pRF to resample to. For instance, if you’ve used a low-resolution design matrix, but you’d like a
prettier image, you can set <cite>resize</cite> to something higher than the original (54 &gt;&gt; 270, for example). By default not
used.</p></li>
<li><p><strong>best_vertex</strong> (<em>bool</em><em>, </em><em>optional</em>) – Signifies that we should load in the parameters of the target vertex used in line-scanning experiments. If <em>True</em>, the
‘best_vertex’-parameters given <cite>model</cite> will be read in. If <em>False</em>, the iterative fit parameters from <cite>model</cite> will be
read in.</p></li>
<li><p><strong>filter_list</strong> (<em>list</em><em>, </em><em>optional</em>) – Extra filters to search for particular design matrix. By default, we’ll look for a file with [“design”, “mat”], but if
you have multiple files that correspond to this list you can add extra elements to pick the file you need, e.g.,
<cite>filter_list=[“acq-3DEPI”]</cite></p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">lazyfmri</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils</span>
<span class="n">subject_info</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">CollectSubject</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">derivatives</span><span class="o">=&lt;</span><span class="n">path_to_derivatives</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="s1">&#39;recent&#39;</span><span class="p">,</span> <span class="n">hemi</span><span class="o">=</span><span class="s2">&quot;lh&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.CollectSubject.return_prf_params">
<span class="sig-name descname"><span class="pre">return_prf_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lh'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#CollectSubject.return_prf_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.CollectSubject.return_prf_params" title="Link to this definition"></a></dt>
<dd><p>return pRF parameters from <a class="reference internal" href="#fmriproc.prf.VertexInfo" title="fmriproc.prf.VertexInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">fmriproc.prf.VertexInfo</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.CollectSubject.return_target_vertex">
<span class="sig-name descname"><span class="pre">return_target_vertex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lh'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#CollectSubject.return_target_vertex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.CollectSubject.return_target_vertex" title="Link to this definition"></a></dt>
<dd><p>return the vertex ID of target vertex</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.CollectSubject.target_prediction_prf">
<span class="sig-name descname"><span class="pre">target_prediction_prf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xkcd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_spectrum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_figure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#CollectSubject.target_prediction_prf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.CollectSubject.target_prediction_prf" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.ExtendedModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">ExtendedModel</span></span><a class="reference internal" href="../_modules/fmriproc/prf.html#ExtendedModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.ExtendedModel" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.ExtendedModel.define_grid_bounds">
<span class="sig-name descname"><span class="pre">define_grid_bounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#ExtendedModel.define_grid_bounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.ExtendedModel.define_grid_bounds" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.ExtendedModel.gridfit">
<span class="sig-name descname"><span class="pre">gridfit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#ExtendedModel.gridfit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.ExtendedModel.gridfit" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.ExtendedModel.iterfit">
<span class="sig-name descname"><span class="pre">iterfit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#ExtendedModel.iterfit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.ExtendedModel.iterfit" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.FormatTimeCourses">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">FormatTimeCourses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#FormatTimeCourses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.FormatTimeCourses" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.FormatTimeCourses.average_iterations">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_iterations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_folds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#FormatTimeCourses.average_iterations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.FormatTimeCourses.average_iterations" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.FormatTimeCourses.format_hemi_data">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_hemi_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gifti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_folds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#FormatTimeCourses.format_hemi_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.FormatTimeCourses.format_hemi_data" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.FormatTimeCourses.get_verts">
<span class="sig-name descname"><span class="pre">get_verts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#FormatTimeCourses.get_verts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.FormatTimeCourses.get_verts" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.FormatTimeCourses.return_data">
<span class="sig-name descname"><span class="pre">return_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#FormatTimeCourses.return_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.FormatTimeCourses.return_data" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.GaussianModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">GaussianModel</span></span><a class="reference internal" href="../_modules/fmriproc/prf.html#GaussianModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.GaussianModel" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.GaussianModel.gridfit">
<span class="sig-name descname"><span class="pre">gridfit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#GaussianModel.gridfit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.GaussianModel.gridfit" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.GaussianModel.iterfit">
<span class="sig-name descname"><span class="pre">iterfit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#GaussianModel.iterfit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.GaussianModel.iterfit" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.Parameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">Parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#Parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.Parameters" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.Parameters.to_array">
<span class="sig-name descname"><span class="pre">to_array</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#Parameters.to_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.Parameters.to_array" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.Parameters.to_df">
<span class="sig-name descname"><span class="pre">to_df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#Parameters.to_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.Parameters.to_df" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.Profile1D">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">Profile1D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_pix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dm_kws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'norm'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#Profile1D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.Profile1D" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#fmriproc.prf.pRFmodelFitting" title="fmriproc.prf.pRFmodelFitting"><code class="xref py py-class docutils literal notranslate"><span class="pre">pRFmodelFitting</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.Profile1D.create_dm">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_dm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_pix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#Profile1D.create_dm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.Profile1D.create_dm" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.Profile1D.find_crossings">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_crossings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curve</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#Profile1D.find_crossings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.Profile1D.find_crossings" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.Profile1D.plot_dm">
<span class="sig-name descname"><span class="pre">plot_dm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#Profile1D.plot_dm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.Profile1D.plot_dm" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">SizeResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prf_stim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'norm'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsample_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_pix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_distance_cm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">196</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_size_cm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[70,</span> <span class="pre">39.3]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_size_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1920,</span> <span class="pre">1080]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Perform size-response related operations given a pRF-stimulus/parameters. Simulate the pRF-response using a set of growing
stimuli (or growing holes) using <a class="reference internal" href="#fmriproc.prf.make_stims" title="fmriproc.prf.make_stims"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.make_stims()</span></code></a>, create size/hole response functions, and find stimulus
sizes that maximize activation and suppression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>numpy.ndarray</em><em>, </em><em>str</em><em>, </em><em>pd.DataFrame</em>) – Output of a Divisive Normalization fit</p></li>
<li><p><strong>prf_stim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">prfpy.stimulus.PRFStimulus2D</span></code>) – Object describing the nature of the stimulus</p></li>
<li><p><strong>subject_info</strong> (<a class="reference internal" href="#fmriproc.prf.CollectSubject" title="fmriproc.prf.CollectSubject"><code class="xref py py-class docutils literal notranslate"><span class="pre">fmriproc.prf.CollectSubject</span></code></a>, optional) – Subject information collected in <a class="reference internal" href="#fmriproc.prf.VertexInfo" title="fmriproc.prf.VertexInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">fmriproc.prf.VertexInfo</span></code></a> that can be used for
<a class="reference internal" href="#fmriproc.prf.SizeResponse.save_target_params" title="fmriproc.prf.SizeResponse.save_target_params"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.SizeResponse.save_target_params()</span></code></a></p></li>
<li><p><strong>model</strong> (<em>str</em><em>, </em><em>optional</em>) – Model from which <cite>params</cite> is derived. Default = “norm”</p></li>
<li><p><strong>subject_info</strong> – Object collection defaults given a subject. Mainly used to generate the <cite>prf_stim</cite> object, which is used to derive
information about screen settings, which can also be set with the flags below. Therefore, not mandatory.</p></li>
<li><p><strong>downsample_factor</strong> (<em>int</em><em>, </em><em>optional</em>) – The default screen is [1920,1080]. This is rather large and can be complicated CPU wise. This flag downsamples the
screen size by selecting every <cite>downsample_factor</cite> along the x and y axis</p></li>
<li><p><strong>n_pix</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of pixels in the design matrix to simulate (smaller is faster)</p></li>
<li><p><strong>screen_distance_cm</strong> (<em>int</em><em>, </em><em>optional</em>) – Distance from viewer to screen. Default is the MRI-scanner value of 196 cm</p></li>
<li><p><strong>screen_size_cm</strong> (<em>float</em><em>, </em><em>tuple</em><em>, </em><em>list</em><em>, </em><em>optional</em>) – Dimensions of the screen in <strong>centimeters</strong>. Default is the BOLD screen: [70,39.3]. Specify a single value to create
square stimuli</p></li>
<li><p><strong>screen_size_px</strong> (<em>float</em><em>, </em><em>tuple</em><em>, </em><em>list</em><em>, </em><em>optional</em>) – Dimensions of the screen in <strong>pixels</strong>. Default is the BOLD screen: [1920,1080]. Specify a single value to create
square stimuli</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">fmriproc</span><span class="w"> </span><span class="kn">import</span> <span class="n">prf</span>
<span class="c1"># define file with pRF estimates</span>
<span class="n">in_file</span> <span class="o">=</span> <span class="s2">&quot;sub-01_ses-1_task-2R_model-norm_stage-iter_desc-prf_params.pkl&quot;</span>
<span class="c1">#</span>
<span class="c1"># read the input file into a dataframe</span>
<span class="n">df_for_srfs</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">Parameters</span><span class="p">(</span><span class="n">in_file</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_df</span><span class="p">()</span>
<span class="c1">#</span>
<span class="c1"># initialize class</span>
<span class="n">SR_</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">SizeResponse</span><span class="p">(</span>
    <span class="n">params</span><span class="o">=</span><span class="n">df_for_srfs</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span>
    <span class="n">screen_distance_cm</span><span class="o">=</span><span class="mi">196</span><span class="p">,</span>
    <span class="n">screen_size_cm</span><span class="o">=</span><span class="p">[</span><span class="mi">70</span><span class="p">,</span><span class="mf">39.3</span><span class="p">],</span>
    <span class="n">screen_size_px</span><span class="o">=</span><span class="p">[</span><span class="mi">1920</span><span class="p">,</span><span class="mi">1080</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">lazyfmri</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils</span>
<span class="c1"># Collect subject-relevant information in class</span>
<span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;sub-001&quot;</span>
<span class="n">hemi</span> <span class="o">=</span> <span class="s2">&quot;lh&quot;</span>
<span class="c1">#</span>
<span class="k">if</span> <span class="n">hemi</span> <span class="o">==</span> <span class="s2">&quot;lh&quot;</span><span class="p">:</span>
    <span class="n">hemi_tag</span> <span class="o">=</span> <span class="s2">&quot;hemi-L&quot;</span>
<span class="k">elif</span> <span class="n">hemi</span> <span class="o">==</span> <span class="s2">&quot;rh&quot;</span><span class="p">:</span>
    <span class="n">hemi_tag</span> <span class="o">=</span> <span class="s2">&quot;hemi-R&quot;</span>
<span class="c1">#</span>
<span class="n">subject_info</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">CollectSubject</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">prf_dir</span><span class="o">=</span><span class="n">prf_dir</span><span class="p">,</span>
    <span class="n">cx_dir</span><span class="o">=</span><span class="n">cx_dir</span><span class="p">,</span>
    <span class="n">hemi</span><span class="o">=</span><span class="n">hemi</span><span class="p">,</span>
    <span class="n">resize_pix</span><span class="o">=</span><span class="mi">270</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1">#</span>
<span class="c1"># Get and plot fMRI signal</span>
<span class="n">data_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_file_from_substring</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;avg_bold_</span><span class="si">{</span><span class="n">hemi_tag</span><span class="si">}</span><span class="s2">.npy&quot;</span><span class="p">,</span> <span class="n">subject_info</span><span class="o">.</span><span class="n">prfdir</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_fn</span><span class="p">)[</span><span class="o">...</span><span class="p">,</span><span class="n">subject_info</span><span class="o">.</span><span class="n">return_target_vertex</span><span class="p">(</span><span class="n">hemi</span><span class="o">=</span><span class="n">hemi</span><span class="p">)]</span>
<span class="c1">#</span>
<span class="c1"># insert old parameters</span>
<span class="n">insert_params</span> <span class="o">=</span> <span class="n">subject_info</span><span class="o">.</span><span class="n">target_params</span>
<span class="c1">#</span>
<span class="c1"># initiate class</span>
<span class="n">fitting</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">pRFmodelFitting</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="o">...</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
    <span class="n">design_matrix</span><span class="o">=</span><span class="n">subject_info</span><span class="o">.</span><span class="n">design_matrix</span><span class="p">,</span>
    <span class="n">TR</span><span class="o">=</span><span class="n">subject_info</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;TR&#39;</span><span class="p">],</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span>
    <span class="n">stage</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span>
    <span class="n">old_params</span><span class="o">=</span><span class="n">insert_params</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="n">subject_info</span><span class="o">.</span><span class="n">prfdir</span><span class="p">,</span>
    <span class="n">nr_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#</span>
<span class="c1"># fit</span>
<span class="n">fitting</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">new_params</span> <span class="o">=</span> <span class="n">fitting</span><span class="o">.</span><span class="n">norm_grid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1">#</span>
<span class="c1"># size response functions</span>
<span class="n">SR</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">SizeResponse</span><span class="p">(</span><span class="n">fitting</span><span class="o">.</span><span class="n">prf_stim</span><span class="p">,</span> <span class="n">new_params</span><span class="p">)</span>

<span class="c1"># add subject info object</span>
<span class="n">SR</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">SizeResponse</span><span class="p">(</span><span class="n">fitting</span><span class="o">.</span><span class="n">prf_stim</span><span class="p">,</span> <span class="n">new_params</span><span class="p">,</span> <span class="n">subject_info</span><span class="o">=</span><span class="n">subject_info</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse.batch_sr_function">
<span class="sig-name descname"><span class="pre">batch_sr_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center_prf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse.batch_sr_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse.batch_sr_function" title="Link to this definition"></a></dt>
<dd><p>create Size-Response function. If you want to ignore the actual location of the pRF, set <cite>center_prf=True</cite>. You can
also scale the pRF-size with a factor <cite>scale_factor</cite>, for instance if you want to simulate pRF-sizes across depth.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse.find_pref_size">
<span class="sig-name descname"><span class="pre">find_pref_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse.find_pref_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse.find_pref_size" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse.find_stim_sizes">
<span class="sig-name descname"><span class="pre">find_stim_sizes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curve1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">curve2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'max'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fill'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_ampl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse.find_stim_sizes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse.find_stim_sizes" title="Link to this definition"></a></dt>
<dd><p>Function to fetch the stimulus sizes that optimally disentangle the responses of two pRFs given the Size-Response
curves. Starts by finding the maximum response for each curve, then finds the intersect, then finds the stimulus sizes
before and after the intersect where the response difference is largest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>curve1</strong> (<em>numpy.ndarray</em>) – Array representing the first SR-curve (as per output for <a class="reference internal" href="#fmriproc.prf.SizeResponse.make_sr_function" title="fmriproc.prf.SizeResponse.make_sr_function"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.SizeResponse.make_sr_function()</span></code></a>)</p></li>
<li><p><strong>curve2</strong> (<em>numpy.ndarray</em>) – Array representing the second SR-curve (as per output for <a class="reference internal" href="#fmriproc.prf.SizeResponse.make_sr_function" title="fmriproc.prf.SizeResponse.make_sr_function"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.SizeResponse.make_sr_function()</span></code></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>array containing the optimal stimulus sizes as per <code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.SizeResponse.make_stims()</span></code></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># follows up on example in *fmriproc.prf.SizeResponse*</span>
<span class="n">SR</span><span class="o">.</span><span class="n">make_stimuli</span><span class="p">()</span>
<span class="n">sr_curve1</span> <span class="o">=</span> <span class="n">SR</span><span class="o">.</span><span class="n">make_sr_function</span><span class="p">(</span><span class="n">center_prf</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sr_curve2</span> <span class="o">=</span> <span class="n">SR</span><span class="o">.</span><span class="n">make_sr_function</span><span class="p">(</span><span class="n">center_prf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span> <span class="c1"># decrease pRF size of second pRF by 20%</span>
<span class="n">use_stim_sizes</span> <span class="o">=</span> <span class="n">SR</span><span class="o">.</span><span class="n">find_stim_sizes</span><span class="p">(</span><span class="n">sr_curve1</span><span class="p">,</span> <span class="n">sr_curve2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse.make_sr_function">
<span class="sig-name descname"><span class="pre">make_sr_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center_prf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse.make_sr_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse.make_sr_function" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse.make_stimuli">
<span class="sig-name descname"><span class="pre">make_stimuli</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fill'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse.make_stimuli"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse.make_stimuli" title="Link to this definition"></a></dt>
<dd><p>create stimuli for Size-Response curve simulation. See <a class="reference internal" href="#fmriproc.prf.make_stims" title="fmriproc.prf.make_stims"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.make_stims()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse.plot_stim_size">
<span class="sig-name descname"><span class="pre">plot_stim_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vf_extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">([-5,</span> <span class="pre">5],</span> <span class="pre">[-5,</span> <span class="pre">5])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(8,</span> <span class="pre">178,</span> <span class="pre">240)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse.plot_stim_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse.plot_stim_size" title="Link to this definition"></a></dt>
<dd><p>plot output of <a class="reference internal" href="#fmriproc.prf.SizeResponse.find_stim_sizes" title="fmriproc.prf.SizeResponse.find_stim_sizes"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.SizeResponse.find_stim_sizes()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.SizeResponse.save_target_params">
<span class="sig-name descname"><span class="pre">save_target_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'L'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#SizeResponse.save_target_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.SizeResponse.save_target_params" title="Link to this definition"></a></dt>
<dd><p>Write best_vertices-type file for normalization parameters + full normalization parameters in numpy-file</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.VertexInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">VertexInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infofile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lh'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#VertexInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.VertexInfo" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This object reads a .csv file containing relevant information about the angles, vertex position, and normal vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>infofile</strong> (<em>str</em>) – path to the information file containing <cite>best_vertices</cite> in the filename</p></li>
<li><p><strong>subject</strong> (<em>str</em>) – subject ID as used in <cite>SUBJECTS_DIR</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>sets attributes in the class</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>attr</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.VertexInfo.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keyword</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'both'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#VertexInfo.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.VertexInfo.get" title="Link to this definition"></a></dt>
<dd><p>return values from dataframe given keyword. Can be any column name or ‘prf’ for pRF-parameters</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.baseline_from_dm">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">baseline_from_dm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#baseline_from_dm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.baseline_from_dm" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.create_circular_mask">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">create_circular_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#create_circular_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.create_circular_mask" title="Link to this definition"></a></dt>
<dd><p>Creates a circular mask in a numpy meshgrid to create filled stimuli or mask out parts of a circular stimulus to create
concentric stimuli.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h</strong> (<em>int</em>) – height of meshgrid</p></li>
<li><p><strong>w</strong> (<em>int</em>) – width of meshgrid</p></li>
<li><p><strong>center</strong> (<em>tuple</em><em>, </em><em>list</em>) – center of the circle to create</p></li>
<li><p><strong>radius</strong> (<em>float</em>) – radius of stimulus to draw</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>np.meshgrid with input size with the specified circle set to ones</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.create_line_prf_matrix">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">create_line_prf_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nr_trs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_at_half_TR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.105</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_pix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">270</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deleted_first_timepoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deleted_last_timepoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_before</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_after</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_first_img</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dm_edges_clipping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#create_line_prf_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.create_line_prf_matrix" title="Link to this definition"></a></dt>
<dd><p>Adaptation of get_prfdesign. Uses a similar principle, but rather than having an image per TR, we have images with onset
times. With this function we can fill in an empty design matrix with size of n_samples to create the design matrix. This
holds for cases where the stimulus duration is modulo the repetition time (e.g., stim duration = 0.315, repetition time =
0.105). In cases where the stimulus duration is incongruent with the repetition time, we can loop through the repetition
times and find, in the onsets dataframe, the closest time and select that stimulus for our design matrix. This later case
works for the partial pRF experiment that we run with 3D-EPI 1.1s TR acquisition, and should work with the line-scanning
acquisition as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_dir</strong> (<em>str</em>) – path to the log-directory as per the output of exptools experiments. We should have a “Screenshots”-directory in there
and a <em>.tsv</em>-file containing the onset times</p></li>
<li><p><strong>nr_trs</strong> (<em>int</em>) – number of TRs in an acquisition run; this one is required if the stimulus duration is not modulo the repetition time</p></li>
<li><p><strong>TR</strong> (<em>float</em><em> (</em><em>default = 0.105s</em><em>)</em>) – repetition time of scan acquisition. Needed to convert the onset times from seconds to TRs</p></li>
<li><p><strong>stim_at_half_TR</strong> (<em>bool</em>) – set to True if you want the stimulus halfway through the TR. This flag can be used in combination with &lt;nr_trs&gt;, when
the stimulus duration is not modulo the repetition time</p></li>
<li><p><strong>deleted_first_timepoints</strong> (<em>int</em>) – number of volumes to skip in the beginning; should be the same as used in ParseFunc-file and/or ParseFuncFile (if used
in concert) (default = 0)</p></li>
<li><p><strong>deleted_last_timepoints</strong> (<em>int</em>) – number of volumes to skip at the end; should be the same as used in ParseFuncFile and/or ParseFuncFile (if used in
concert) (default = 0)</p></li>
<li><p><strong>n_pix</strong> (<em>int</em>) – size determinant of the design matrix. Note, &lt;n_pix&gt; is hardcoded as well in the function itself because I ran stuff
on my laptop and that screen has a different size than the stimulus computer &#64;Spinoza (default = 270px)</p></li>
<li><p><strong>stim_duration</strong> (<em>float</em>) – length of stimulus presentation (in seconds; default = 1s)</p></li>
<li><p><strong>skip_first_img</strong> (<em>boolean</em>) – depending on how you coded the screenshot capturing, the first empty screen is something also captured. With this flag
we can skip that image (default = True).</p></li>
<li><p><strong>dm_edges_clipping</strong> (<em>list</em><em>, </em><em>dict</em><em>, </em><em>optional</em>) – people don’t always see the entirety of the screen so it’s important to check what the subject can actually see by
showing them the cross of for instance the BOLD-screen (the matlab one, not the linux one) and clip the image
accordingly</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>design matrix with size &lt;n_pix, n_pix, n_samples&gt;</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.create_model_rf_wrapper">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">create_model_rf_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize_RFs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#create_model_rf_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.create_model_rf_wrapper" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.create_stim_library">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">create_stim_library</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_pix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_stim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range_around_center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[40,</span> <span class="pre">40]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concentricity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">26</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#create_stim_library"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.create_stim_library" title="Link to this definition"></a></dt>
<dd><p>Create library of stimuli to build a design matrix with</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.deg2pix">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">deg2pix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">degrees</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_object</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrSizePix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[270,</span> <span class="pre">270]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrWidthCm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">39.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrDist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">196</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#deg2pix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.deg2pix" title="Link to this definition"></a></dt>
<dd><p>Convert size in degrees to size in pixels for a given Monitor object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.distance_centers">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">distance_centers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prf1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#distance_centers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.distance_centers" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.find_most_similar_prf">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">find_most_similar_prf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reference_prf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">look_in_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_nr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r2_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#find_most_similar_prf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.find_most_similar_prf" title="Link to this definition"></a></dt>
<dd><p>find a pRF with similar characteristics in one array given the specifications of another pRF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reference_prf</strong> (<em>numpy.ndarray</em>) – pRF-parameters from the reference pRF, where <cite>reference_prf[0]</cite> = <strong>x</strong>, <cite>reference_prf[1]</cite> = <strong>y</strong>, and
<cite>reference_prf[2]</cite> = <strong>size</strong></p></li>
<li><p><strong>look_in_params</strong> (<em>numpy.ndarray</em>) – array of pRF-parameters in which we will be looking for <cite>reference_prf</cite></p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Set to True if you want some messages along the way (default = False)</p></li>
<li><p><strong>return_nr</strong> (<em>str</em><em>, </em><em>int</em>) – same parameter as in <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyfmri.utils.find_nearest()</span></code>, where we can specify how many matches we want to have
returned (default = “all”)</p></li>
<li><p><strong>r2_thresh</strong> (<em>float</em>) – after finding matching pRF, throw away fits below <cite>r2_thresh</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>array containing the indices of <cite>look_in_params</cite> that conform the search</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.gauss_1d_function">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">gauss_1d_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#gauss_1d_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.gauss_1d_function" title="Link to this definition"></a></dt>
<dd><p>Create 1d gaussian from parameters</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.generate_model_params">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">generate_model_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_hrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#generate_model_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.generate_model_params" title="Link to this definition"></a></dt>
<dd><p>Function to generate a yaml-file with parameters to use. Utilizes the
[prf_analysis.yml](<a class="reference external" href="https://github.com/gjheij/fmriproc/blob/main/misc/prf_analysis.yml">https://github.com/gjheij/fmriproc/blob/main/misc/prf_analysis.yml</a>) as basis, but it’s advised to copy
the file to the <cite>DIR_DATA_HOME/code</cite>-folder so you have a project-specific template. Depending on the model, we’ll add
grids and bounds and return a dictionary of settings. This dictionary is saved in the <cite>pkl</cite>-file as per the output of
<a class="reference internal" href="#fmriproc.prf.pRFmodelFitting" title="fmriproc.prf.pRFmodelFitting"><code class="xref py py-class docutils literal notranslate"><span class="pre">fmriproc.prf.pRFmodelFitting</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>str</em>) – model type to utilize.</p></li>
<li><p><strong>dm</strong> (<em>numpy.ndarray</em>) – design matrix, n_pix X n_pix X volumes. Needed to create the pRF stimulus</p></li>
<li><p><strong>TR</strong> (<em>float</em>) – repetition time; can be fetched from gifti-file; default = 1.5</p></li>
<li><p><strong>fit_hrf</strong> (<em>bool</em>) – Whether or not to fit two extra parameters for hrf derivative and dispersion. The default is False.</p></li>
<li><p><strong>old_settings</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary describing an existing set of settings (e.g., from previous fit)</p></li>
<li><p><strong>hrf</strong> (<em>list</em><em>, </em><em>optional</em>) – List of HRF parameters if it deviates from hrf parameters in settings file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dict</em> – Dictionary containing the settings</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">prfpy.stimlus.PRFStimulus2D</span></code>-object – pRF stimulus object</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.get_onset_idx">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">get_onset_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">design</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#get_onset_idx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.get_onset_idx" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.get_prfdesign">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">get_prfdesign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">screenshot_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_pix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dm_edges_clipping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#get_prfdesign"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.get_prfdesign" title="Link to this definition"></a></dt>
<dd><p>Basically Marco’s gist, but then incorporated in the repo. It takes the directory of screenshots and creates a
vis_design.mat file, telling pRFpy at what point are certain stimulus was presented.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>screenshot_path</strong> (<em>str</em>) – string describing the path to the directory with png-files</p></li>
<li><p><strong>n_pix</strong> (<em>int</em>) – size of the design matrix (basically resolution). The larger the number, the more demanding for the CPU. It’s best to
have some value which can be divided with 1080, as this is easier to downsample. Default is 40, but 100 seems to be a
good trade-off between resolution and CPU-demands</p></li>
<li><p><strong>dm_edges_clipping</strong> (<em>list</em><em>, </em><em>dict</em><em>, </em><em>optional</em>) – people don’t always see the entirety of the screen so it’s important to check what the subject can actually see by
showing them the cross of for instance the BOLD-screen (the matlab one, not the linux one) and clip the image
accordingly. This is a list of 4 values, which are the number of pixels to clip from the left, right, top and bottom
of the image. Default is [0,0,0,0], which means no clipping. Negative values will be set to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>array with shape &lt;n_pix,n_pix,timepoints&gt; representing a binary paradigm</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dm</span> <span class="o">=</span> <span class="n">get_prfdesign</span><span class="p">(</span>
    <span class="s1">&#39;path/to/dir/with/pngs&#39;</span><span class="p">,</span>
    <span class="n">n_pix</span><span class="o">=</span><span class="mi">270</span><span class="p">,</span>
    <span class="n">dm_edges_clipping</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.make_prf">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">make_prf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prf_object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_pix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#make_prf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.make_prf" title="Link to this definition"></a></dt>
<dd><p>Create an instantiation of a pRF using the parameters obtained during fitting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prf_object</strong> (<em>prfpy.stimulus.PRFStimulus2D</em>) – representation the pRF in visual space</p></li>
<li><p><strong>mu_x</strong> (<em>float</em>) – x-component of pRF. Leave default if you want to create size/response functions</p></li>
<li><p><strong>mu_y</strong> (<em>float</em>) – y-component of pRF. Leave default if you want to create size/response functions</p></li>
<li><p><strong>size</strong> (<em>float</em>) – size of pRF, optional</p></li>
<li><p><strong>resize_pix</strong> (<em>int</em>) – resolution of pRF to resample to. For instance, if you’ve used a low-resolution design matrix, but you’d like a
prettier image, you can set <cite>resize</cite> to something higher than the original (54 &gt;&gt; 270, for example). By default not
used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>meshgrid containing Gaussian characteristics of the pRF. Can be plotted with <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyfmri.plotting.LazyPRF()</span></code></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.make_stims">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">make_stims</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim_stim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concentric_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.65</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fill'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#make_stims"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.make_stims" title="Link to this definition"></a></dt>
<dd><p>Create a list of stimuli to generate size/response curves.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>array</em>) – Visual field delineation.</p></li>
<li><p><strong>prf_object</strong> (<em>prfpy.stimulus.PRFStimulus2D</em>) – Representation of the pRF in visual space.</p></li>
<li><p><strong>dim_stim</strong> (<em>int</em>) – Number of dimensions to use: 2 for circle, 1 for bar.</p></li>
<li><p><strong>factor</strong> (<em>int</em>) – Factor by which to increase stimulus size.</p></li>
<li><p><strong>loc</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Location to center stimuli on. Default is (0,0).</p></li>
<li><p><strong>dt</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of stimulus to create. Default is ‘fill’. Other options:
- ‘full’ : fullscreen stimulus
- ‘concentric’ : circles with holes
- ‘hole’ : fullscreen with growing hole.</p></li>
<li><p><strong>concentric_size</strong> (<em>float</em><em>, </em><em>optional</em>) – Proportion of stimulus size that needs to be masked out again.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of arrays with meshgrid-size containing the stimuli.
Can be plotted with <a class="reference internal" href="#fmriproc.prf.plot_stims" title="fmriproc.prf.plot_stims"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.plot_stims()</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.make_stims2">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">make_stims2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_pix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim_stim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">degrees</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0,</span> <span class="pre">6]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concentric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concentric_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.65</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#make_stims2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.make_stims2" title="Link to this definition"></a></dt>
<dd><p>Creates a list of stimuli to create size/response curves. In contrast to the first version, this version uses
<a class="reference internal" href="#fmriproc.prf.create_circular_mask" title="fmriproc.prf.create_circular_mask"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.create_circular_mask()</span></code></a> more intensively. This allows for the manual specification of visual degrees to
use, as it uses an adaptation of psychopy’s <cite>deg2pix</cite> function to translate the visual degree to pixel space to create a
numpy mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_pix</strong> (<em>int</em>) – number of pixels in the grid to use</p></li>
<li><p><strong>prf_object</strong> (<em>prfpy.stimulus.PRFStimulus2D</em>) – representation the pRF in visual space</p></li>
<li><p><strong>dim_stim</strong> (<em>int</em>) – number of dimensions to use: 2 for circle, 1 for bar</p></li>
<li><p><strong>degrees</strong> (<em>list</em>) – list representing the range of visual degrees to create the stimuli with</p></li>
<li><p><strong>concentric</strong> (<em>boolean</em>) – If true, concentric stimuli will be made. For that, the next argument is required</p></li>
<li><p><strong>concentric_size</strong> (<em>float</em>) – proportion of stimulus size that needs to be masked out again</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of numpy.ndarrays with meshgrid-size containing the stimuli. Can be plotted with <a class="reference internal" href="#fmriproc.prf.plot_stims" title="fmriproc.prf.plot_stims"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.plot_stims()</span></code></a></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.norm_1d_sr_function">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">norm_1d_sr_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mu_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#norm_1d_sr_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.norm_1d_sr_function" title="Link to this definition"></a></dt>
<dd><p>Create size/response function for 1D stimuli</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.norm_2d_sr_function">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">norm_2d_sr_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mu_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mu_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#norm_2d_sr_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.norm_2d_sr_function" title="Link to this definition"></a></dt>
<dd><p>create size/response function given set of parameters and stimuli</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.normalize_prf">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">normalize_prf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targ</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#normalize_prf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.normalize_prf" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">pRFmodelFitting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">design_matrix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'iter'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_hrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nr_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_stim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix_bold_baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix_hrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_grid_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#fmriproc.prf.GaussianModel" title="fmriproc.prf.GaussianModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianModel</span></code></a>, <a class="reference internal" href="#fmriproc.prf.ExtendedModel" title="fmriproc.prf.ExtendedModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtendedModel</span></code></a></p>
<p>Main class to perform all the pRF-fitting. By default, we’ll first look for a <cite>prf_analysis.yml</cite>-file in
<cite>DIR_DATA_HOME/code</cite>. If there’s no file there, we’ll take the file provided with the <em>fmriproc</em>-repository
(<a class="reference external" href="https://github.com/gjheij/fmriproc/blob/main/misc/prf_analysis.yml">https://github.com/gjheij/fmriproc/blob/main/misc/prf_analysis.yml</a>). Generally, the input data is expected to be
percent-signal changed where the timecourses are shifted such that the median of the timepoints <em>without</em> stimulus is set
to 0 (see <a class="reference external" href="https://github.com/gjheij/fmriproc/blob/main/bin/call_prf#L267">https://github.com/gjheij/fmriproc/blob/main/bin/call_prf#L267</a> how this works).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>numpy.ndarray</em>) – &lt;voxels,time&gt; numpy array | when reading in the data later again, the format must be &lt;time,voxels&gt;. This is highly
annoying, but it seems to be required for predictions to work properly.</p></li>
<li><p><strong>design_matrix</strong> (<em>numpy.ndarray</em>) – &lt;n_pix, n_pix, time&gt; numpy array containing the paradigm</p></li>
<li><p><strong>TR</strong> (<em>float</em>) – repetition time of acquisition; required for the analysis file. If you’re using gifti-input, you can fetch the TR from
that file with <cite>gifti = lazyfmri.dataset.ParseGiftiFile(gii_file).TR_sec</cite>. If you’re file have been created with
<cite>fMRIprep</cite> or <cite>call_vol2fsaverage</cite>, this should work.</p></li>
<li><p><strong>model</strong> (<em>str</em>) – as of now, one of [‘gauss’,’dog’,’css’,’norm’] is accepted</p></li>
<li><p><strong>stage</strong> (<em>str</em>) – Can technically be anything. By default, grid-fits are executed, but if <cite>stage</cite> contains <cite>iter</cite> (e.g.,
<cite>stage=”iter”</cite>), an iterative fit is executed as well.</p></li>
<li><p><strong>output_dir</strong> (<em>str</em>) – directory to store all files in; should be somewhere in &lt;project&gt;/derivatives/prf/&lt;subject&gt;</p></li>
<li><p><strong>output_base</strong> (<em>str</em>) – basename for output files; should be something like &lt;subject&gt;_&lt;ses-?&gt;_&lt;task-?&gt;</p></li>
<li><p><strong>write_files</strong> (<em>bool</em>) – save files (True) or not (False). Should be used in combination with &lt;output_dir&gt; and &lt;output_base&gt;</p></li>
<li><p><strong>old_params</strong> (<em>np.ndarray</em><em>, </em><em>str</em><em>, </em><em>optional</em>) – A string pointing to an existing file or a numpy array. Internally, the parameters will be assigned to
<cite>Iso2DGaussianFitter.gridsearch_params</cite> and <cite>Iso2DGaussianFitter.iterative_search_params</cite>. This fitter object is then
assigned to <cite>Iso2DGaussianFitter.previous_gaussian_fitter</cite>, which is then directly inserted in one of the extended
models (e.g., <cite>DN</cite>, <cite>DoG</cite>, or <cite>CSS</cite>).</p></li>
<li><p><strong>hrf</strong> (<em>np.ndarray</em><em>, </em><em>list</em><em>, </em><em>optional</em>) – <p>&lt;1,time_points&gt; describing the HRF. Can be created with <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyfmri.glm.double_gamma()</span></code>, then add an axis before the
timepoints:</p>
<p>dt = 1
time_points = np.linspace(0,36,np.rint(float(36)/dt).astype(int))
hrf_custom = lazyfmri.glm.double_gamma(time_points, lag=6)
hrf_custom = hrf_custom[np.newaxis,…]</p>
<p>Can also be a list of three parameters for the SPM-functions. Defaults to [1,1,0], for the HRF, and the time
derivative.</p>
</p></li>
<li><p><strong>fit_hrf</strong> (<em>bool</em>) – fit the HRF with the pRF-parameters as implemented in <cite>prfpy</cite></p></li>
<li><p><strong>nr_jobs</strong> (<em>int</em><em>, </em><em>optional</em>) – Set the number of jobs. By default 1.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Set to True if you want some messages along the way (default = False)</p></li>
<li><p><strong>constraints</strong> (<em>list</em><em>, </em><em>str</em><em>, </em><em>optional</em>) – Specify optimizers. Use <cite>tc</cite> for trust-constrained minimization (= slower, but less local. I.e., can move away from
the grid), or <cite>bfgs</cite> for L-BFGS-B minimization (lot faster, but more local. I.e., stays closer to the grid). If <cite>tc</cite>
or <cite>bgfs</cite>, this minimizer is used for both stages. You can also specify a list where the first element is for
<em>Gaussian</em>-model and second element is for extended model, e.g., <cite>[‘tc’, ‘bgfs’]</cite>. Generally, the extended model has
more parameters so the fit is slower, while the Gaussian-model runs fine with slow optimization (<cite>tc</cite>). Default = <cite>tc</cite>
for both stages as it leads to improved <em>r2</em>.</p></li>
<li><p><strong>save_grid</strong> (<em>bool</em><em>, </em><em>optional</em>) – Save grid-parameters; can save clogging up of directories. Default = True</p></li>
<li><p><strong>any</strong> (<em>optional</em>) – You can also provide a value for any key/item present in the default settings-file, e.g., <cite>screen_size_cm</cite>,
<cite>rsq_threshold</cite>, <cite>TR</cite>, you name it. This will overwrite the default setting, without the requirement of specifying a
new file. Allows for quick tests/adaptations to the default settings. This is especially useful in cases where - pls
no.. - you have different screen distances in one dataset.</p></li>
<li><p><strong>skip_settings</strong> (<em>bool</em><em>, </em><em>optional</em>) – avoids overwriting of particular settings (e.g., screen_distance_cm), and takes them from the reference analysis file
instead</p></li>
<li><p><strong>optimizer_kws</strong> (<em>dict</em><em>, </em><em>optional</em>) – Extra arguments that will be directly passed on to <cite>scipy:minimize</cite>. x(a)tol/f(a)tol values will be set from the
settings file.</p></li>
<li><p><strong>fix_parameters</strong> (<em>list</em><em>, </em><em>optional</em>) – Fix certain parameters from a previous fitting stage for the next. This argument is generally used to fix the position.
The BOLD baseline can be fixed to 0 using <cite>fix_bold_baseline=True</cite>, and the HRF can be fixed using <cite>fix_hrf</cite>. The latter
requires a bit more attention due to indices differing across models. Only the parameters x, y, prf_size, prf_ampl are
the same across models.</p></li>
<li><p><strong>fix_bold_baseline</strong> (<em>bool</em><em>, </em><em>optional</em>) – Fix the baseline of the BOLD to [0, 0]. Generally recommended if your data is already percent signal changed and you
would like to do surround-suppression stuff. The default is therefore True.</p></li>
<li><p><strong>fix_hrf</strong> (<em>bool</em><em>, </em><em>optional</em>) – Fix the HRF parameters from a previous fitter. For instance, you run a Gaussian model followed by DoG model and would
like to use the fitted parameters from the Gaussian model for the DoG model. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>For each model, a pickle file with the settings, parameters, and predictions all in one</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pkl-file</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">fmriproc.prf</span><span class="w"> </span><span class="kn">import</span> <span class="n">pRFmodelFitting</span>
<span class="n">fitting</span> <span class="o">=</span> <span class="n">pRFmodelFitting</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">design_matrix</span><span class="o">=</span><span class="n">dm</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gauss&#39;</span><span class="p">)</span>

<span class="c1"># we can use this class to read in existing parameter files</span>
<span class="n">prf_pfov</span> <span class="o">=</span> <span class="n">opj</span><span class="p">(</span><span class="n">prf_new</span><span class="p">,</span> <span class="s2">&quot;sub-003_ses-3_task-pRF_acq-3DEPI_model-norm_stage-iter_desc-prf_params.npy&quot;</span><span class="p">)</span>
<span class="n">modelling_pfov</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">pRFmodelFitting</span><span class="p">(</span>
    <span class="n">partial_nan</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
    <span class="n">design_matrix</span><span class="o">=</span><span class="n">design_pfov</span><span class="p">,</span>
    <span class="n">stage</span><span class="o">=</span><span class="s2">&quot;iter&quot;</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="n">prf_new</span><span class="p">,</span>
    <span class="n">output_base</span><span class="o">=</span><span class="s2">&quot;sub-003_ses-3_task-pRF_acq-3DEPI&quot;</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">modelling_pfov</span><span class="o">.</span><span class="n">load_params</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">prf_pfov</span><span class="p">),</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="s1">&#39;iter&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>See <a class="reference external" href="https://fmriproc.readthedocs.io/en/latest/examples/prfmodelfitter.html">https://fmriproc.readthedocs.io/en/latest/examples/prfmodelfitter.html</a> for more elaborate example of fitting, loading,
visualization, and HRF-fitting</p>
<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.define_hrf">
<span class="sig-name descname"><span class="pre">define_hrf</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.define_hrf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.define_hrf" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.define_settings">
<span class="sig-name descname"><span class="pre">define_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.define_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.define_settings" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.fetch_bounds">
<span class="sig-name descname"><span class="pre">fetch_bounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.fetch_bounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.fetch_bounds" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.fetch_optimizer_info">
<span class="sig-name descname"><span class="pre">fetch_optimizer_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.fetch_optimizer_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.fetch_optimizer_info" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.fit" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.fix_hrf_parameters">
<span class="sig-name descname"><span class="pre">fix_hrf_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.fix_hrf_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.fix_hrf_parameters" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.get_max_parameter_shape">
<span class="sig-name descname"><span class="pre">get_max_parameter_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.get_max_parameter_shape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.get_max_parameter_shape" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.load_params">
<span class="sig-name descname"><span class="pre">load_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'iter'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.load_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.load_params" title="Link to this definition"></a></dt>
<dd><p>Attribute of <cite>self</cite>, with which you can load in an existing file with pRF-estimates. If the input file is a
<cite>pkl</cite>-file, you’ll get access to all the required information about your analysis: the settings, the input data, the
predictions, and the design matrix. To do this, we need the <cite>params_file</cite> as well as information about the origin of
the file; which model (e.g., <cite>gauss</cite>) and stage (e.g., ‘iter’) did the file arise from. We’ll then internally set theparameters to the specified model and stage, making it compatible with
<a class="reference internal" href="#fmriproc.prf.pRFmodelFitting.plot_vox" title="fmriproc.prf.pRFmodelFitting.plot_vox"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.pRFmodelFitting.plot_vox()</span></code></a>. It can also be a <cite>numpy.ndarray</cite> or <cite>pandas.DataFrame</cite>, but then less
information about the analysis is known.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params_file</strong> (<em>str</em><em>, </em><em>dict</em><em>, </em><em>pandas.DataFrame</em><em>, </em><em>numpy.ndarray</em>) – Input to load in. You’ll get the most out of it when you use a <cite>pkl</cite>-file created with
<a class="reference internal" href="#fmriproc.prf.pRFmodelFitting" title="fmriproc.prf.pRFmodelFitting"><code class="xref py py-class docutils literal notranslate"><span class="pre">fmriproc.prf.pRFmodelFitting</span></code></a>, as you’ll have access to the predictions, timecourses, parameters, and
settings. If you do not have this, you can also enter a <cite>numpy.ndarray</cite> or <cite>pandas.DataFrame</cite>. The latter is
assumed to be a result from <a class="reference internal" href="#fmriproc.prf.SizeResponse" title="fmriproc.prf.SizeResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">fmriproc.prf.SizeResponse</span></code></a>, in that it’s a <em>Divisive-Normalization</em> model
result, with the following columns: <cite>[‘x’,’y’,’prf_size’,’A’,’bold_bsl’,’B’,’C’,’surr_size’,’D’,’r2’]</cite> and indexed
by <cite>hemi</cite> (<cite>L</cite>/<cite>R</cite>). Can also be a dictionary collecting filenames as values, and model names (e.g., ‘gauss’,
‘norm’) as keys.</p></li>
<li><p><strong>model</strong> (<em>str</em><em>, </em><em>list optional</em>) – Model from which the pRF-estimates came from, by default ‘gauss’</p></li>
<li><p><strong>stage</strong> (<em>str</em><em>, </em><em>optional</em>) – Stage from which the pRF-estimates came from, by default ‘iter’</p></li>
<li><p><strong>hemi</strong> (<em>str</em><em>, </em><em>optional</em>) – In case <cite>params_file</cite> is a <cite>pandas.DataFrame</cite> indexed by <cite>hemi</cite> and you want a particular subset of the dataframe</p></li>
<li><p><strong>return_pars</strong> (<em>bool</em><em>, </em><em>optional</em>) – Instead of setting the parameters as attributes given <cite>model</cite> and <cite>stage</cite>, just return the parameters as output.
This will still update the settings internally if the input was a pickle-file containing the <strong>settings</strong> key.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If input is <cite>pandas.DataFrame</cite>, but input does not have index <cite>hemi</cite></p></li>
<li><p><strong>ValueError</strong> – If input is not one of <cite>str</cite>, <cite>numpy.ndarray</cite>, <cite>pandas.DataFrame</cite></p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># we initiate the model as per usual</span>
<span class="n">gauss_load</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">pRFmodelFitting</span><span class="p">(</span>
    <span class="n">data</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
    <span class="n">design_matrix</span><span class="o">=</span><span class="n">design</span><span class="p">,</span>
    <span class="n">TR</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">gauss_load</span><span class="o">.</span><span class="n">load_params</span><span class="p">(</span><span class="s2">&quot;sub-01_ses-1_model-norm_stage-iter_desc-prf_params.pkl&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gauss&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="s2">&quot;iter&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Also see <a class="reference external" href="https://fmriproc.readthedocs.io/en/latest/examples/prfmodelfitter.html">https://fmriproc.readthedocs.io/en/latest/examples/prfmodelfitter.html</a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.make_predictions">
<span class="sig-name descname"><span class="pre">make_predictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vox_nr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'iter'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.make_predictions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.make_predictions" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.plot_vox">
<span class="sig-name descname"><span class="pre">plot_vox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vox_nr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'iter'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_figure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xkcd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_spectrum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fft'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_pix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">270</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'tc':</span> <span class="pre">None}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wratios</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_int</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.plot_vox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.plot_vox" title="Link to this definition"></a></dt>
<dd><p>Quick function to plot the pRF-location in visual space as well as the raw timecourse + prediction. This is done based
on voxel-indexing, <cite>vox_nr</cite>. You’ll need to specify the <cite>model</cite> and <cite>stage</cite> flags to select the correct pRF-estimates.
If you do not want a figure, but just the outputs, you can set <cite>make_figure=False</cite>. Other flags are customizations,
such as adding a power spectrum, font size, and xkcd-style plotting. <cite>axis_type</cite> refers to the nature of the x-axis.
Can either be <cite>volumes</cite> or <cite>time</cite> (generally time is more informative). Finally, if you have a slightly lower
resolution design matrix, you can upsample your pRF-location with a given pixel size (e.g., <cite>270</cite>). This is only for
aesthetics in the figure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vox_nr</strong> (<em>int</em><em>, </em><em>np.ndarray</em><em>, </em><em>optional</em>) – Voxel/vertex index to create the plot for, by default 0. Can also be a 1D array</p></li>
<li><p><strong>model</strong> (<em>str</em><em>, </em><em>optional</em>) – Which <em>model</em> to select the pRF-estimates from, by default ‘gauss’</p></li>
<li><p><strong>stage</strong> (<em>str</em><em>, </em><em>optional</em>) – Which <em>stage</em> to select the pRF-estimates from, by default ‘iter’</p></li>
<li><p><strong>make_figure</strong> (<em>bool</em><em>, </em><em>optional</em>) – Make the figure (<cite>make_figure=True</cite>) and output <cite>params</cite>, the <cite>np.ndarray</cite> representing the pRF in visual space,
the BOLD timecourse, and the <cite>prediction</cite>; or <cite>make_figure=False</cite> and only return <cite>params</cite> and <cite>prediction</cite>, by
default True</p></li>
<li><p><strong>xkcd</strong> (<em>bool</em><em>, </em><em>optional</em>) – Make the plot in xkcd-style, by default False</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the timecourse plot. If <cite>title=’pars’</cite>, we’ll set the parameters as title. This can be useful to quickly
check parameters, by default None</p></li>
<li><p><strong>font_size</strong> (<em>int</em><em>, </em><em>optional</em>) – Fontsize for x/y-labels and title, by default 18</p></li>
<li><p><strong>transpose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Depending on how the predictions are loaded, you might need to transpose. Generally, if you’ve ran the fitting
before plotting, this should be fine. Rule of thumb: if you get an indexing error, try <cite>transpose=True</cite>.</p></li>
<li><p><strong>freq_spectrum</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add a frequency spectrum of the timecourse, by default False</p></li>
<li><p><strong>freq_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Which type of frequency sprectrum, by default ‘fft’ (see also <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyfmri.preproc.get_freq()</span></code></p></li>
<li><p><strong>clip_power</strong> (<em>int</em><em>, </em><em>optional</em>) – Clip the power of the spectrum to enhance visualization, by default None</p></li>
<li><p><strong>save_as</strong> (<em>str</em><em>, </em><em>optional</em>) – Save the figure as <cite>save_as</cite>, by default None</p></li>
<li><p><strong>axis_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of x-axis, by default “volumes”. Can also be ‘time’ to use time-dimension, rather than volume-dimension</p></li>
<li><p><strong>resize_pix</strong> (<em>int</em><em>, </em><em>optional</em>) – Spatially smooth your pRF if you’ve used a low-resolution design matrix, by default None. Generally,
<cite>resize_pix=270</cite> results in pleasing pRF-depictions</p></li>
<li><p><strong>add_tc</strong> (<em>dict</em><em>, </em><em>np.ndarray</em><em>, </em><em>optional</em>) – <p>Allows an additional timecourse to be plotted with the data and the prediction. Can be either a numpy array or a
dictionary with the following keys:</p>
<ul>
<li><p>”tc”: the timecourse to add. If <cite>add_tc == np.ndarray</cite>, then “tc” will be set internally</p></li>
<li><p>”color”: any valid <cite>matplotlib</cite>-color (e.g., RGB/Hex). Default = “b”</p></li>
<li><p>”lw”: line width of the timecourse. Default = 2</p></li>
<li><p>”marker”: marker type of the timecourse. Default = None</p></li>
<li><p>”label”: label to add to the legend. Default = “extra”</p></li>
</ul>
<p>Some examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">add_tc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span> <span class="c1"># simplest</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set some extra options</span>
<span class="n">add_tc</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;tc&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]),</span>
    <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;grid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;marker&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>normalize</strong> (<em>bool</em><em>, </em><em>optional</em>)</p></li>
<li><p><strong>False</strong> (<em>Normalize the prediction to the max amplitude. Default =</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>np.ndarray</em> – 1D-array representing the parameters of you selected voxel</p></li>
<li><p><em>np.ndarray</em> – 2D-array representing the pRF of your selected voxel in visual space</p></li>
<li><p><em>np.ndarray</em> – 1D-array representing the raw BOLD timecourse of your selected voxel</p></li>
<li><p><em>np.ndarray</em> – 1D-array representing the prediction of your selected voxel given <cite>model</cite>, <cite>stage</cite>, and <cite>voxel</cite></p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">fmriproc.prf</span><span class="w"> </span><span class="kn">import</span> <span class="n">pRFmodelFitting</span>

<span class="c1"># define the model</span>
<span class="n">fitting</span> <span class="o">=</span> <span class="n">pRFmodelFitting</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">design_matrix</span><span class="o">=</span><span class="n">dm</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gauss&#39;</span><span class="p">)</span>

<span class="c1"># fit</span>
<span class="n">fitting</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># plot the 1st voxel</span>
<span class="n">fitting</span><span class="o">.</span><span class="n">plot_vox</span><span class="p">(</span>
    <span class="n">vox_nr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;pars&#39;</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gauss&#39;</span><span class="p">,</span>
    <span class="n">stage</span><span class="o">=</span><span class="s1">&#39;iter&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<ul>
<li><p>To silence output, use:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span> <span class="n">fitting</span><span class="o">.</span><span class="n">plot_vox</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Also check <a class="reference external" href="https://fmriproc.readthedocs.io/en/latest/examples/prfmodelfitter.html">https://fmriproc.readthedocs.io/en/latest/examples/prfmodelfitter.html</a> for more examples</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.save_params">
<span class="sig-name descname"><span class="pre">save_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gauss'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'grid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.save_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.save_params" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.unitwise_bounds">
<span class="sig-name descname"><span class="pre">unitwise_bounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.unitwise_bounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.unitwise_bounds" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fmriproc.prf.pRFmodelFitting.update_settings">
<span class="sig-name descname"><span class="pre">update_settings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pRFmodelFitting.update_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pRFmodelFitting.update_settings" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.pix2deg">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">pix2deg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pixels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_object</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrSizePix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[270,</span> <span class="pre">270]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrWidthCm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">39.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrDist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">196</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#pix2deg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.pix2deg" title="Link to this definition"></a></dt>
<dd><p>Convert size in pixels to size in degrees for a given Monitor object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.plot_stims">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">plot_stims</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">([-5,</span> <span class="pre">5],</span> <span class="pre">[-5,</span> <span class="pre">5])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_object</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_circle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'g'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_fixation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flipud</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#plot_stims"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.plot_stims" title="Link to this definition"></a></dt>
<dd><p>Plots all stimuli contained in <cite>stims</cite> as created in <cite>prf.make_stims</cite>. Assumesthat about 33 stimuli have been produced,
otherwise axes ordering will be messy..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stims</strong> (<em>list</em>) – list of numpy.ndarrays with meshgrid-size containing the stimuli</p></li>
<li><p><strong>n_cols</strong> (<em>int</em><em>, </em><em>optional</em>) – number of columns to use. Number of rows will be automatically derived from the number of <cite>stims</cite> and <cite>interval</cite></p></li>
<li><p><strong>figsize</strong> (<em>tuple</em><em>, </em><em>optional</em>) – custom figure size; otherwise will be determined from the number of columns and rows</p></li>
<li><p><strong>save_as</strong> (<em>str</em><em>, </em><em>optional</em>) – save the figure</p></li>
<li><p><strong>axis_on</strong> (<em>bool</em><em>, </em><em>optional</em>) – show the axes in the figures. Default is false</p></li>
<li><p><strong>prf_object</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – add a spatial representation of a pRF to the figure</p></li>
<li><p><strong>as_circle</strong> (<em>bool</em><em>, </em><em>optional</em>) – plot <cite>prf_object</cite> as a simple circle rather than full on pRF-object. The outline of the circle will denote the size of
the pRF as per <cite>prfpy</cite>’s convention</p></li>
<li><p><strong>prf_color</strong> (<em>str</em><em>, </em><em>optional</em>) – color of <cite>prf_object</cite>. If <cite>as_circle==True</cite>, the outline will have this color. If not, a binary colormap will be
created using <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyfmri.utils.make_binary_cm()</span></code></p></li>
<li><p><strong>interval</strong> (<em>int</em><em>, </em><em>optional</em>) – show the stimuli with a certain interval. This prevents a mega-amount of figures that needs to be created.</p></li>
<li><p><strong>stim_color</strong> (<em>str</em><em>, </em><em>optional</em>) – color of <cite>stims</cite>. Binary colormap will be created using <code class="xref py py-func docutils literal notranslate"><span class="pre">lazyfmri.utils.make_binary_cm()</span></code>. If false, colormap
will be <cite>viridis</cite></p></li>
<li><p><strong>add_fixation</strong> (<em>bool</em><em>, </em><em>optional</em>) – add fixation cross add (0,0). If <cite>stim_color</cite> is specified, the color will be black; with viridis, the cross will be
white</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>matplotlib.pyplot plot</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.prf_neighbouring_vertices">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">prf_neighbouring_vertices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subject</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lh'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prf_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertices_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#prf_neighbouring_vertices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.prf_neighbouring_vertices" title="Link to this definition"></a></dt>
<dd><p>Function to extract pRF-parameters from vertices neighbouring a particular vertex of interest. Internally uses
“call_prfinfo” to extract the parameters, so it assumes a particular kind of data structure (for now..)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subject</strong> (<em>str</em>) – string used as subject ID (e.g., ‘sub-001’)</p></li>
<li><p><strong>hemi</strong> (<em>str</em>) – string (‘lh’|’rh’) used to annotate the hemisphere which is required to index the correct pRF parameters</p></li>
<li><p><strong>vertex</strong> (<em>int</em>) – vertex from which to extract neighbouring vertices</p></li>
<li><p><strong>prf_params</strong> (<em>str</em><em>, </em><em>np.ndarray</em>) – if you do not want to depend on fixed data structures, you can specify the pRF-parameters directly with a string
pointing to a numpy-file or the numpy-array itself</p></li>
<li><p><strong>compare</strong> (<em>bool</em>) – if True, it will compare the parameters of neighbouring vertices with the parameters of &lt;vertex&gt;</p></li>
<li><p><strong>vertices_only</strong> (<em>bool</em>) – only return the vertices, not their pRF-parameters (which might depend on a certain project structure)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list</em> – list of dictionaries containing the pRF-parameters for each vertex</p></li>
<li><p><em>list</em> – list of the neighbouring vertices</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Note that the last element in both is the information about the requested vertex itself!</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.radius">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">radius</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stim_arr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#radius"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.radius" title="Link to this definition"></a></dt>
<dd><p>Return the radius of a given stimulus within a stimulus grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stim_arr</strong> (<em>numpy.ndarray</em>) – arrays containing the stimulus as created with <a class="reference internal" href="#fmriproc.prf.make_stims" title="fmriproc.prf.make_stims"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.make_stims()</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>radius of circular stimulus within stim_arr</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.read_par_file">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">read_par_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prf_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pars'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#read_par_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.read_par_file" title="Link to this definition"></a></dt>
<dd><p>Function to read in files containing pRF-estimates from various sources. Currently, supports the following inputs:
<cite>np.ndarray</cite>, <cite>npy</cite>-file, <cite>mat</cite>-file (will read in the data from the last item in <cite>list(prf_file.keys())</cite>), <cite>pkl</cite>-file
(assumes has key ‘pars’ in it). Because we generally save the design matrix as a <em>.mat</em>-file, we can use the same function
to read in that file and obtain the design matrix in <cite>np.ndarray</cite>-format. Inputs <cite>pd.DataFrame</cite> will be converted to
<cite>np.ndarray</cite> with <a class="reference internal" href="#fmriproc.prf.Parameters" title="fmriproc.prf.Parameters"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.Parameters()</span></code></a>, assuming certain column names to be present.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>array containing the pRF-estimates or other parameters (e.g., design matrix embedded in <cite>mat</cite>-file)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – If <cite>pkl</cite>-file was given, but attribute <cite>pars</cite> does not exist inside the file</p></li>
<li><p><strong>TypeError</strong> – If the input is not a <cite>np.ndarray</cite>, and not a string ending on <cite>npy</cite>, <cite>mat</cite>, or <cite>pkl</cite></p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in pRF-estimates file</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fmriproc</span><span class="w"> </span><span class="kn">import</span> <span class="n">prf</span>
<span class="n">prf_file</span> <span class="o">=</span> <span class="s2">&quot;sub-01_ses-1_task-2R_model-norm_stage-iter_desc-prf_params.pkl&quot;</span>
<span class="n">pars</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">read_par_file</span><span class="p">(</span><span class="n">prf_file</span><span class="p">)</span>

<span class="c1"># read design matrix</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fmriproc</span><span class="w"> </span><span class="kn">import</span> <span class="n">prf</span>
<span class="n">dm_file</span> <span class="o">=</span> <span class="s2">&quot;design_task-2R.mat&quot;</span>
<span class="n">dm</span> <span class="o">=</span> <span class="n">prf</span><span class="o">.</span><span class="n">read_par_file</span><span class="p">(</span><span class="n">dm_file</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.resample2d">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">resample2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#resample2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.resample2d" title="Link to this definition"></a></dt>
<dd><p>Resamples a 2D (or 3D) array with <code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.interpolate.interp2d()</span></code> to <cite>new_size</cite>. If input is 2D, we’ll loop over the final axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>np.ndarray</em>) – Array to be interpolated. Ideally axis have the same size.</p></li>
<li><p><strong>new_size</strong> (<em>int</em>) – New size of array</p></li>
<li><p><strong>kind</strong> (<em>str</em><em>, </em><em>optional</em>) – Interpolation method, by default ‘linear’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If 2D: resampled array of shape <cite>(new_size,new_size)</cite>
If 3D: resampled array of shape <cite>(new_size,new_size, array.shape[-1])</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fmriproc.prf.select_stims">
<span class="sig-prename descclassname"><span class="pre">fmriproc.prf.</span></span><span class="sig-name descname"><span class="pre">select_stims</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_library</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">225</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_frames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_onsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fmriproc/prf.html#select_stims"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fmriproc.prf.select_stims" title="Link to this definition"></a></dt>
<dd><p>Function to create a fictitious design matrix based on the ‘lib’-variable containing a library of 4 different types of bar
stimuli: ‘hori’ (horizontal), ‘vert’ (vertical) ‘rot_45’ (horizontal bars rotated 45 degrees counterclockwise), and
‘rot_135’ (horizontal bars rotated 135 degrees counterclockwise). Using a ‘settings’-dictionary, you can specify how many
and which of each of these stimuli you want.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings_dict</strong> (<em>dict</em>) – <p>dictionary containing the number of stimuli and index of stimuli (as per the library) that you would like to include.
An example is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">use_settings</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;hori&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">],</span>
<span class="s1">&#39;vert&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">25</span><span class="p">],</span>
<span class="s1">&#39;rot_45&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">],</span>
<span class="s1">&#39;rot_135&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>this selects 0 horizontal stimuli, 4x the 25th vertical stimulus in ‘lib’, 4x the 18th stimulus of the 45 degree
rotated stimuli, and 0 of the 135 degree rotated stimuli.</p>
</p></li>
<li><p><strong>stim_library</strong> (<em>dict</em>) – library containing different types of stimuli. Can be create with <a class="reference internal" href="#fmriproc.prf.create_stim_library" title="fmriproc.prf.create_stim_library"><code class="xref py py-func docutils literal notranslate"><span class="pre">fmriproc.prf.create_stim_library()</span></code></a></p></li>
<li><p><strong>frames</strong> (<em>int</em>) – number of frames your design matrix should have. Should be the same as your functional data in terms of TR (default =
225)!</p></li>
<li><p><strong>baseline_frames</strong> (<em>int</em>) – number of baseline frames before stimulus presentation begins. Only needs to be specified if ‘randomize’ is set to
False (default = 15).</p></li>
<li><p><strong>randomize</strong> (<em>bool</em>) – boolean whether you want to completely randomize your experiment or not. Generally you’ll want to set this to false,
to create a regular intervals between stimuli (default = False).</p></li>
<li><p><strong>shuffle</strong> (<em>bool</em>) – if randomize is turned off, we can still shuffle the order of the stimulus presentations. This you can do by setting
shuffle to True (default = True)</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Set to True if you want some messages along the way (default = False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>&lt;n_pix,n_pix,frames&gt; numpy array representing your design</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="planning.html" class="btn btn-neutral float-left" title="Planning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="roi.html" class="btn btn-neutral float-right" title="Roi" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>